--- configure.in~	2009-08-17 21:27:40.152347576 +0200
+++ configure.in	2009-08-17 21:29:05.412340085 +0200
@@ -52,54 +52,6 @@
   fi
 fi
 
-# If Visibility support is available switch that on, to reduce the exported
-# symbol space.
-AC_ARG_ENABLE(visibility,
-[  --enable-visibility     Enable gcc visibility options],
-[],
-[enable_visibility="no"])
-if test x$enable_visibility = xyes; then
-
-AC_MSG_CHECKING(whether GNUC visibility support)
-AC_CACHE_VAL(ac_cv_fvisibility_ok,
-[ac_save_cc="$CC"
-CC="$CC -fvisibility=hidden"
-AC_TRY_RUN([int main() { return 0; }],
-  ac_cv_fvisibility_ok=yes,
-  ac_cv_fvisibility_ok=no,
-  ac_cv_fvisibility_ok=no)
-CC="$ac_save_cc"])
-AC_MSG_RESULT($ac_cv_fvisibility_ok)
-if test $ac_cv_fvisibility_ok = yes; then
-AC_MSG_CHECKING(for GNUC visibility attribute)
-GLIB_CHECK_COMPILE_WARNINGS([
-void
-__attribute__ ((visibility ("hidden")))
-     f_hidden (void)
-{
-}
-void
-__attribute__ ((visibility ("default")))
-     f_default (void)
-{
-}
-int main (int argc, char **argv)
-{
-        f_hidden();
-        f_default();
-        return 0;
-}
-],g_have_gnuc_visibility=yes,g_have_gnuc_visibility=no)
-AC_MSG_RESULT($g_have_gnuc_visibility)
-if test x$g_have_gnuc_visibility = xyes; then
-  AC_DEFINE(HAVE_GCC_VISIBILITY, 1, [supports GCC visibility attributes])
-  CFLAGS="$CFLAGS -fvisibility=hidden"
-  CXXFLAGS="$CXXFLAGS -fvisibility=hidden -fvisibility-inlines-hidden"
-fi
-fi
-
-fi
-
 dnl FIXME This is truly gross.
 missing_dir=`cd $ac_aux_dir && pwd`
 dnl FIXME I pulled this default list from sanity.sh.  Perhaps these lists
